<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vai Dar Maré!</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Playwrite+DE+SAS:wght@100..400&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Define a fonte Inter como padrão */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #004D66; /* light blue-gray background */
        }
        /* Estilos adicionais para botões e cards */
        .card {
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.06);
.nk.k
k



            background-color: rgba(255, 255, 255, 1);
            border: 1px solid rgba(229, 231, 235, 0.6);
        }
        /* CLASSE CURSIVA EXPRESSIVA */
        .cursive-title {
            font-family: 'Playwrite DE SAS', cursive
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        'main-blue': '#004D66', // Cor do fundo
                        'result-bg': '#E6F3F7', // Azul bem claro, harmonizando com o fundo principal
                        'result-border': '#99C7D3', // Borda sutil
                    }
                }
            }
        }
    </script>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <div class="w-full max-w-lg card rounded-xl p-6 md:p-8">
        
        <div class="flex flex-col items-center -mt-4 mb-4">
            <img src="vaida192.png" class="max-w-xs">
            <h2 class="cursive-title text-3xl font-extrabold text-[#23466E] mt-2">
                Vai Dar Maré!
            </h2>
        </div>
        
        <form id="tideForm" class="space-y-4">
            
            <p class="text-sm font-medium text-gray-700 text-center py-2">
                Tábua das Marés de Natal/RN
            </p>

            <div>
                <label for="dateInput" class="block text-sm font-medium text-gray-700">Data</label>
                <input type="date" id="dateInput" required 
                       class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 transition duration-150 ease-in-out">
            </div>

            <button type="submit" id="submitBtn" 
                    class="w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-main-blue hover:bg-opacity-90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-main-blue transition duration-300 ease-in-out transform hover:scale-[1.01]">
                <span id="btnText">Consultar</span>
            </button>
        </form>

        <div id="resultsContainer" class="mt-6 p-4 rounded-lg bg-gray-50 border border-gray-200 min-h-[100px] flex flex-col items-center justify-center transition-all duration-300">
            <p id="message" class="text-gray-500 text-center">Insira a data para consultar a tábua de marés.</p>
            <div id="tideList" class="w-full mt-4 space-y-3 hidden">
                </div>
            <svg id="loadingSpinner" class="animate-spin -ml-1 mr-3 h-6 w-6 text-main-blue hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
        </div>
        
        <p class="mt-6 text-xs text-center text-gray-400">Dados fornecidos pela QWeather. Integração via Vercel Serverless Function.</p>
    </div>

    <script>
        const form = document.getElementById('tideForm');
        const dateInput = document.getElementById('dateInput');
        const resultsContainer = document.getElementById('resultsContainer');
        const message = document.getElementById('message');
        const tideList = document.getElementById('tideList');
        const loadingSpinner = document.getElementById('loadingSpinner');
        const submitBtn = document.getElementById('submitBtn');
        const btnText = document.getElementById('btnText');

        // VALOR FIXO: ID da localização de Natal/RN
        const LOCATION_ID = 'P24427'; 

        // URL do nosso endpoint de proxy no Vercel
        const API_BASE_URL = '/api/tide'; 

        // Funções de Utilidade
        function getTodayDate() {
            const today = new Date();
            const yyyy = today.getFullYear();
            const mm = String(today.getMonth() + 1).padStart(2, '0'); // Mês começa em 0
            const dd = String(today.getDate()).padStart(2, '0');
            return `${yyyy}-${mm}-${dd}`;
        }
        
        function showLoading(show) {
            submitBtn.disabled = show;
            btnText.textContent = show ? 'Consultando...' : 'Consultar';
            loadingSpinner.classList.toggle('hidden', !show);
            tideList.classList.add('hidden');
            tideList.innerHTML =
